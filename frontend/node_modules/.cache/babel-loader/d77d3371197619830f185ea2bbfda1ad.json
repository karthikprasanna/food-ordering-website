{"ast":null,"code":"var _jsxFileName = \"/home/karthik_prasanna/Desktop/arathy/frontend/src/components/vendor/actiondispatch.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Button } from 'react-bootstrap';\n\nfunction ActionDispatch(props) {\n  let productID = \"\";\n  let OrderID = \"\";\n  const [product, setProduct] = useState(\"\");\n  const [order, setOrder] = useState(\"\");\n  const [quantity, setQuantity] = useState(0);\n  const [allOrders, setAllOrders] = useState([]);\n  const [allUsers, setAllUsers] = useState([]);\n  useEffect(() => {\n    OrderID = localStorage.getItem(\"DASS_ITEMID\");\n    console.log(\"OID:\", OrderID);\n    axios.get('http://localhost:4000/order/' + OrderID).then(response => {\n      console.log(response.data);\n      setOrder(response.data);\n    }); // also get the list of all the users\n\n    axios.get('http://localhost:4000/user/getnames/').then(response => {\n      setAllUsers(response.data);\n    });\n  }, []);\n\n  function getname(name) {\n    if (name == \"\") {\n      return \"\";\n    }\n\n    var results = allUsers.filter(function (i) {\n      return i._id == name;\n    });\n\n    if (results[0] == undefined) {\n      return \"\";\n    }\n\n    return results[0].username;\n  }\n\n  productID = order.product;\n  var a = 0;\n  console.log(\"sending\", orderDetails);\n  axios.post('http://localhost:4000/order/add', orderDetails).then(res => {\n    console.log(\"Ordered successfully \");\n    document.getElementById(\"comments\").innerHTML = \"Ordered successfully \";\n    axios.put('http://localhost:4000/product/order_decrement/' + productID, order_decrement).then(res => {\n      console.log(\"Decremented successfully \"); // document.getElementById(\"comments\").innerHTML=\"Ordered successfully \"\n\n      window.location.replace('/orders');\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }).catch(function (error) {\n    console.log(error);\n  });\n\n  function REJECTED() {\n    if (product.status == \"COMPLETED\") {\n      document.getElementById(\"comments\").innerHTML = \"Already completed\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else {\n      productID = localStorage.getItem(\"DASS_ITEMID\");\n      const new_status = {\n        status: \"REJECTED\"\n      };\n      axios.put('http://localhost:4000/product/change_status/' + productID, new_status).then(res => {\n        document.getElementById(\"comments\").innerHTML = \"REJECTED successfully\";\n        document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\";\n        product.status = \"REJECTED\";\n        axios.put('http://localhost:4000/product/reset_quantity/' + productID).then(res => {\n          window.location.replace('/products');\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n\n  function COMPLETED() {\n    productID = localStorage.getItem(\"DASS_ITEMID\");\n\n    if (product.status == \"Waiting\") {\n      document.getElementById(\"comments\").innerHTML = \"Order not yet placed as more items need to be ordered\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else if (product.status == \"REJECTED\") {\n      document.getElementById(\"comments\").innerHTML = \"REJECTED Order\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else if (product.status == \"COMPLETED\") {\n      document.getElementById(\"comments\").innerHTML = \"Already COMPLETED\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else {\n      const new_status = {\n        status: \"COMPLETED\"\n      };\n      axios.put('http://localhost:4000/product/change_status/' + productID, new_status).then(res => {\n        document.getElementById(\"comments\").innerHTML = \"COMPLETED successfully\";\n        document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\";\n        product.status = \"COMPLETED\";\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n\n  function ACCEPTED() {\n    productID = localStorage.getItem(\"DASS_ITEMID\");\n\n    if (product.status == \"Waiting\") {\n      document.getElementById(\"comments\").innerHTML = \"Order not yet placed as more items need to be ordered\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else if (product.status == \"REJECTED\") {\n      document.getElementById(\"comments\").innerHTML = \"REJECTED Order\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else if (product.status == \"COMPLETED\") {\n      document.getElementById(\"comments\").innerHTML = \"Already COMPLETED\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else {\n      const new_status = {\n        status: \"ACCEPTED\"\n      };\n      axios.put('http://localhost:4000/product/change_status/' + productID, new_status).then(res => {\n        document.getElementById(\"comments\").innerHTML = \"ACCEPTED successfully\";\n        document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\";\n        product.status = \"ACCEPTED\";\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n\n  function COOKING() {\n    productID = localStorage.getItem(\"DASS_ITEMID\");\n\n    if (product.status == \"Waiting\") {\n      document.getElementById(\"comments\").innerHTML = \"Order not yet placed as more items need to be ordered\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else if (product.status == \"REJECTED\") {\n      document.getElementById(\"comments\").innerHTML = \"REJECTED Order\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else if (product.status == \"COMPLETED\") {\n      document.getElementById(\"comments\").innerHTML = \"Already COMPLETED\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else {\n      const new_status = {\n        status: \"COOKING\"\n      };\n      axios.put('http://localhost:4000/product/change_status/' + productID, new_status).then(res => {\n        document.getElementById(\"comments\").innerHTML = \"COOKING successfully\";\n        document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\";\n        product.status = \"COOKING\";\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n\n  function READY_FOR_PICKUP() {\n    productID = localStorage.getItem(\"DASS_ITEMID\");\n\n    if (product.status == \"Waiting\") {\n      document.getElementById(\"comments\").innerHTML = \"Order not yet placed as more items need to be ordered\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else if (product.status == \"REJECTED\") {\n      document.getElementById(\"comments\").innerHTML = \"REJECTED Order\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else if (product.status == \"COMPLETED\") {\n      document.getElementById(\"comments\").innerHTML = \"Already COMPLETED\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else {\n      const new_status = {\n        status: \"READY FOR PICKUP\"\n      };\n      axios.put('http://localhost:4000/product/change_status/' + productID, new_status).then(res => {\n        document.getElementById(\"comments\").innerHTML = \"READY FOR PICKUP successfully\";\n        document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\";\n        product.status = \"READY FOR PICKUP\";\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    className: \"table table-hover thead-light table-responsive-lg \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, \"Vendor\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, \"Quantity\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }, \"Rating\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, \"Review\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }, {\n    orders\n  }.orders.orders.map((currentOrder, i) => {\n    return React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, (() => getname(currentOrder.vendor))()), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, currentOrder.quantity), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, currentOrder.rating), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, currentOrder.review));\n  }))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"success\",\n    onClick: ACCEPTED,\n    value: ACCEPTED,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245\n    },\n    __self: this\n  }, \"ACCEPTED\"), React.createElement(Button, {\n    variant: \"danger\",\n    onClick: REJECTED,\n    value: REJECTED,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246\n    },\n    __self: this\n  }, \"REJECTED\"), React.createElement(Button, {\n    variant: \"info\",\n    onClick: COOKING,\n    value: COOKING,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247\n    },\n    __self: this\n  }, \"COOKING\"), React.createElement(Button, {\n    variant: \"info\",\n    onClick: READY_FOR_PICKUP,\n    value: READY_FOR_PICKUP,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, \"READY FOR PICKUP\"), React.createElement(Button, {\n    variant: \"info\",\n    onClick: COMPLETED,\n    value: COMPLETED,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249\n    },\n    __self: this\n  }, \"COMPLETED\"), React.createElement(\"div\", {\n    id: \"comments\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251\n    },\n    __self: this\n  })));\n}\n\nexport default ActionDispatch;","map":{"version":3,"sources":["/home/karthik_prasanna/Desktop/arathy/frontend/src/components/vendor/actiondispatch.js"],"names":["React","useState","useEffect","axios","Button","ActionDispatch","props","productID","OrderID","product","setProduct","order","setOrder","quantity","setQuantity","allOrders","setAllOrders","allUsers","setAllUsers","localStorage","getItem","console","log","get","then","response","data","getname","name","results","filter","i","_id","undefined","username","a","orderDetails","post","res","document","getElementById","innerHTML","put","order_decrement","window","location","replace","catch","error","REJECTED","status","className","new_status","COMPLETED","ACCEPTED","COOKING","READY_FOR_PICKUP","orders","map","currentOrder","vendor","rating","review"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Button } from 'react-bootstrap';\n\nfunction ActionDispatch(props) {\n    let productID = \"\"\n    let OrderID = \"\"\n    const [product, setProduct] = useState(\"\")\n    const [order, setOrder] = useState(\"\")\n    const [quantity, setQuantity] = useState(0)\n    const [allOrders, setAllOrders] = useState([])\n    const [allUsers, setAllUsers] = useState([])\n\n    useEffect(() => {\n        OrderID = localStorage.getItem(\"DASS_ITEMID\")\n        console.log(\"OID:\", OrderID)\n        axios.get('http://localhost:4000/order/' + OrderID)\n            .then(response => {\n                console.log(response.data)\n                setOrder(response.data);\n            })\n        // also get the list of all the users\n        axios.get('http://localhost:4000/user/getnames/')\n            .then(response => {\n                setAllUsers(response.data)\n            })\n    }, []);\n\n    function getname(name) {\n        if (name == \"\") {\n            return \"\"\n        }\n        var results = allUsers.filter(function (i) {\n            return i._id == name\n        })\n        if (results[0] == undefined) {\n            return \"\"\n        }\n        return (results[0].username)\n    }\n\n   productID = order.product;\n        var a = 0\n        console.log(\"sending\", orderDetails)\n        axios.post('http://localhost:4000/order/add', orderDetails)\n            .then(\n                res => {\n                    console.log(\"Ordered successfully \")\n                    document.getElementById(\"comments\").innerHTML = \"Ordered successfully \"\n                    axios.put('http://localhost:4000/product/order_decrement/' + productID, order_decrement).then(\n\n                        res => {\n                            console.log(\"Decremented successfully \")\n                            // document.getElementById(\"comments\").innerHTML=\"Ordered successfully \"\n                            window.location.replace('/orders')\n                        })\n                        .catch(function (error) {\n                            console.log(error);\n                        });\n\n                })\n            .catch(function (error) {\n                console.log(error);\n            });\n    \n\n    function REJECTED() {\n        if (product.status == \"COMPLETED\") {\n            document.getElementById(\"comments\").innerHTML = \"Already completed\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else {\n            productID = localStorage.getItem(\"DASS_ITEMID\")\n            const new_status = {\n                status: \"REJECTED\"\n            }\n            axios.put('http://localhost:4000/product/change_status/' + productID, new_status).then(\n                res => {\n                    document.getElementById(\"comments\").innerHTML = \"REJECTED successfully\"\n                    document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\"\n                    product.status = \"REJECTED\"\n                    axios.put('http://localhost:4000/product/reset_quantity/' + productID).then(\n                        res => {\n                            window.location.replace('/products')\n                        })\n                        .catch(function (error) {\n                            console.log(error);\n                        });\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        }\n    }\n\n    function COMPLETED() {\n        productID = localStorage.getItem(\"DASS_ITEMID\")\n        if (product.status == \"Waiting\") {\n            document.getElementById(\"comments\").innerHTML = \"Order not yet placed as more items need to be ordered\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else if (product.status == \"REJECTED\") {\n            document.getElementById(\"comments\").innerHTML = \"REJECTED Order\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else if (product.status == \"COMPLETED\") {\n            document.getElementById(\"comments\").innerHTML = \"Already COMPLETED\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else {\n            const new_status = {\n                status: \"COMPLETED\"\n            }\n            axios.put('http://localhost:4000/product/change_status/' + productID, new_status).then(\n                res => {\n                    document.getElementById(\"comments\").innerHTML = \"COMPLETED successfully\"\n                    document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\"\n                    product.status = \"COMPLETED\"\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        }\n    }\n    \n    function ACCEPTED() {\n        productID = localStorage.getItem(\"DASS_ITEMID\")\n        if (product.status == \"Waiting\") {\n            document.getElementById(\"comments\").innerHTML = \"Order not yet placed as more items need to be ordered\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else if (product.status == \"REJECTED\") {\n            document.getElementById(\"comments\").innerHTML = \"REJECTED Order\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else if (product.status == \"COMPLETED\") {\n            document.getElementById(\"comments\").innerHTML = \"Already COMPLETED\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else {\n            const new_status = {\n                status: \"ACCEPTED\"\n            }\n            axios.put('http://localhost:4000/product/change_status/' + productID, new_status).then(\n                res => {\n                    document.getElementById(\"comments\").innerHTML = \"ACCEPTED successfully\"\n                    document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\"\n                    product.status = \"ACCEPTED\"\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        }\n    }\n\n    function COOKING() {\n        productID = localStorage.getItem(\"DASS_ITEMID\")\n        if (product.status == \"Waiting\") {\n            document.getElementById(\"comments\").innerHTML = \"Order not yet placed as more items need to be ordered\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else if (product.status == \"REJECTED\") {\n            document.getElementById(\"comments\").innerHTML = \"REJECTED Order\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else if (product.status == \"COMPLETED\") {\n            document.getElementById(\"comments\").innerHTML = \"Already COMPLETED\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else {\n            const new_status = {\n                status: \"COOKING\"\n            }\n            axios.put('http://localhost:4000/product/change_status/' + productID, new_status).then(\n                res => {\n                    document.getElementById(\"comments\").innerHTML = \"COOKING successfully\"\n                    document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\"\n                    product.status = \"COOKING\"\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        }\n    }\n\n    function READY_FOR_PICKUP() {\n        productID = localStorage.getItem(\"DASS_ITEMID\")\n        if (product.status == \"Waiting\") {\n            document.getElementById(\"comments\").innerHTML = \"Order not yet placed as more items need to be ordered\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else if (product.status == \"REJECTED\") {\n            document.getElementById(\"comments\").innerHTML = \"REJECTED Order\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else if (product.status == \"COMPLETED\") {\n            document.getElementById(\"comments\").innerHTML = \"Already COMPLETED\"\n            document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else {\n            const new_status = {\n                status: \"READY FOR PICKUP\"\n            }\n            axios.put('http://localhost:4000/product/change_status/' + productID, new_status).then(\n                res => {\n                    document.getElementById(\"comments\").innerHTML = \"READY FOR PICKUP successfully\"\n                    document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\"\n                    product.status = \"READY FOR PICKUP\"\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        }\n    }\n\n    \n            return (\n                <div>\n                    <table className=\"table table-hover thead-light table-responsive-lg \">\n                        <thead>\n                            <tr>\n                                <th>Vendor</th>\n                                <th>Quantity</th>\n                                <th>Rating</th>\n                                <th>Review</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {\n                                { orders }.orders.orders.map((currentOrder, i) => {\n                                    return (\n                                        <tr>\n                                            <td>{(() => getname(currentOrder.vendor))()}</td>\n                                            <td>{currentOrder.quantity}</td>\n                                            <td>{currentOrder.rating}</td>\n                                            <td>{currentOrder.review}</td>\n                                        </tr>\n                                    )\n                                })\n                            }\n                        </tbody>\n                    </table>\n\n                    <div>\n                        <Button variant=\"success\" onClick={ACCEPTED} value={ACCEPTED}>ACCEPTED</Button>\n                        <Button variant=\"danger\" onClick={REJECTED} value={REJECTED}>REJECTED</Button>\n                        <Button variant=\"info\" onClick={COOKING} value={COOKING}>COOKING</Button>\n                        <Button variant=\"info\" onClick={READY_FOR_PICKUP} value={READY_FOR_PICKUP}>READY FOR PICKUP</Button>\n                        <Button variant=\"info\" onClick={COMPLETED} value={COMPLETED}>COMPLETED</Button>\n        \n                        <div id=\"comments\">\n                        </div>\n                    </div>\n\n                </div>\n            )\n    \n    \n}\nexport default ActionDispatch;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/karthik_prasanna/Desktop/arathy/frontend/src/components/customer/changeorderquantity.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Rating from '../rating';\n\nfunction ChangeOrderQuantity(e) {\n  const [order, setOrder] = useState(5);\n  const [allProducts, setAllProducts] = useState([]);\n  const [newQuantity, setNewQuantity] = useState(\"\");\n  let orderID = \"\";\n  useEffect(() => {\n    orderID = localStorage.getItem(\"DASS_ORDERID\");\n    axios.get('http://localhost:4000/order/' + orderID).then(response => {\n      setOrder(response.data);\n      setNewQuantity(response.data.quantity); // also get the list of all the products\n\n      axios.get('http://localhost:4000/product/showall/').then(response => {\n        setAllProducts(response.data);\n      });\n    });\n  }, []);\n\n  function getPstatus(name) {\n    if (name == \"\") {\n      return \"\";\n    }\n\n    var results = allProducts.filter(function (i) {\n      return i._id == name;\n    });\n\n    if (results[0] == undefined) {\n      return \"\";\n    }\n\n    return results[0].status;\n  }\n\n  function getPremaining(name) {\n    if (name == \"\") {\n      return \"\";\n    }\n\n    var results = allProducts.filter(function (i) {\n      return i._id == name;\n    });\n\n    if (results[0] == undefined) {\n      return \"\";\n    }\n\n    return results[0].quantity_remaining;\n  }\n\n  function changeOrderQuantity(e) {\n    e.preventDefault();\n    orderID = localStorage.getItem(\"DASS_ORDERID\");\n    const reviewDetails = {\n      newQuantity: newQuantity\n    };\n    const order_decrement = {\n      order_value: newQuantity - order.quantity\n    };\n\n    if (newQuantity > getPremaining(order.product) + order.quantity) {\n      console.log(newQuantity, getPremaining(order.product) + order.quantity);\n      document.getElementById(\"comments2\").innerHTML = \"Order a smaller amount\";\n      document.getElementById(\"comments2\").className = \"alert alert-danger alert-dismissible fade show\";\n    } else {\n      axios.put('http://localhost:4000/order/change_quantity/' + orderID, reviewDetails).then(res => {\n        axios.put('http://localhost:4000/product/order_decrement/' + order.product, order_decrement).then(res => {\n          document.getElementById(\"comments2\").innerHTML = \"Changed successfully\";\n          document.getElementById(\"comments2\").className = \"alert alert-success alert-dismissible fade show\";\n          window.location.replace(\"/orders\");\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }).catch(function (error) {\n        console.log(error);\n        document.getElementById(\"comments2\").innerHTML = \"Error\";\n        document.getElementById(\"comments2\").className = \"alert alert-danger alert-dismissible fade show\";\n      });\n    }\n  }\n\n  if (getPstatus(order.product) == \"Waiting\") {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"CHANGE QUANTITY OF ORDER\"), React.createElement(\"form\", {\n      onSubmit: e => changeOrderQuantity(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"New Quantity: \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: newQuantity,\n      onChange: e => setNewQuantity(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"CHANGE\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"comments2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })));\n  } else {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    });\n  }\n}\n\nexport default ChangeOrderQuantity;","map":{"version":3,"sources":["/home/karthik_prasanna/Desktop/arathy/frontend/src/components/customer/changeorderquantity.js"],"names":["React","useState","useEffect","axios","Rating","ChangeOrderQuantity","e","order","setOrder","allProducts","setAllProducts","newQuantity","setNewQuantity","orderID","localStorage","getItem","get","then","response","data","quantity","getPstatus","name","results","filter","i","_id","undefined","status","getPremaining","quantity_remaining","changeOrderQuantity","preventDefault","reviewDetails","order_decrement","order_value","product","console","log","document","getElementById","innerHTML","className","put","res","window","location","replace","catch","error","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport Rating from '../rating'\n\nfunction ChangeOrderQuantity(e) {\n    const [order, setOrder] = useState(5)\n    const [allProducts, setAllProducts] = useState([])\n    const [newQuantity, setNewQuantity] = useState(\"\")\n    let orderID = \"\"\n\n    useEffect(() => {\n        orderID = localStorage.getItem(\"DASS_ORDERID\")\n        axios.get('http://localhost:4000/order/' + orderID)\n            .then(response => {\n                setOrder(response.data);\n                setNewQuantity(response.data.quantity)\n                // also get the list of all the products\n                axios.get('http://localhost:4000/product/showall/')\n                    .then(response => {\n                        setAllProducts(response.data)\n                    })\n\n            })\n    }, []);\n\n    function getPstatus(name) {\n        if (name == \"\") {\n            return \"\"\n        }\n        var results = allProducts.filter(function (i) {\n            return i._id == name\n        })\n        if (results[0] == undefined) {\n            return \"\"\n        }\n        return (results[0].status)\n    }\n\n    function getPremaining(name) {\n        if (name == \"\") {\n            return \"\"\n        }\n        var results = allProducts.filter(function (i) {\n            return i._id == name\n        })\n        if (results[0] == undefined) {\n            return \"\"\n        }\n        return (results[0].quantity_remaining)\n    }\n\n    function changeOrderQuantity(e) {\n        e.preventDefault();\n        orderID = localStorage.getItem(\"DASS_ORDERID\")\n        const reviewDetails = {\n            newQuantity: newQuantity,\n        }\n        const order_decrement = {\n            order_value: newQuantity - order.quantity\n        }\n        if (newQuantity > getPremaining(order.product) + order.quantity) {\n            console.log(newQuantity, getPremaining(order.product) + order.quantity)\n            document.getElementById(\"comments2\").innerHTML = \"Order a smaller amount\"\n            document.getElementById(\"comments2\").className = \"alert alert-danger alert-dismissible fade show\"\n        }\n        else {\n            axios.put('http://localhost:4000/order/change_quantity/' + orderID, reviewDetails).then(\n                res => {\n                    axios.put('http://localhost:4000/product/order_decrement/' + order.product, order_decrement)\n                        .then(res => {\n                            document.getElementById(\"comments2\").innerHTML = \"Changed successfully\"\n                            document.getElementById(\"comments2\").className = \"alert alert-success alert-dismissible fade show\"\n                            window.location.replace(\"/orders\")\n                        })\n                        .catch(function (error) {\n                            console.log(error);\n                        });\n                })\n                .catch(function (error) {\n                    console.log(error);\n                    document.getElementById(\"comments2\").innerHTML = \"Error\"\n                    document.getElementById(\"comments2\").className = \"alert alert-danger alert-dismissible fade show\"\n                });\n        }\n    }\n\n    if (getPstatus(order.product) == \"Waiting\") {\n        return (\n            <div>\n                <h1>CHANGE QUANTITY OF ORDER</h1>\n                <form onSubmit={e => changeOrderQuantity(e)} >\n                    <div className=\"form-group\">\n                        <label>New Quantity: </label>\n                        <input type=\"text\"\n                            className=\"form-control\"\n                            value={newQuantity}\n                            onChange={e => setNewQuantity(e.target.value)}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <input type=\"submit\" value=\"CHANGE\" className=\"btn btn-primary\" />\n                    </div>\n                    <div id=\"comments2\">\n                    </div>\n                </form>\n            </div>\n        )\n    }\n    else {\n        return (\n            <div>\n            </div>\n        )\n    }\n}\n\nexport default ChangeOrderQuantity"]},"metadata":{},"sourceType":"module"}
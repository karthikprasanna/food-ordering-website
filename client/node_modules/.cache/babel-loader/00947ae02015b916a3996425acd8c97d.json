{"ast":null,"code":"var _jsxFileName = \"/home/karthik_prasanna/Desktop/arathy/frontend/src/components/customer/givevendorreview.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Rating from '../rating';\n\nfunction GiveVendorReview() {\n  const [review, setReview] = useState(\"\");\n  const [rating, setRating] = useState(5);\n  const [order, setOrder] = useState(5);\n  const [allProducts, setAllProducts] = useState([]);\n  const [alreadyExists, setAlreadyExists] = useState(\"\");\n  let orderID = \"\";\n  useEffect(() => {\n    orderID = localStorage.getItem(\"DASS_ORDERID\");\n    axios.get('http://localhost:4000/order/' + orderID).then(response => {\n      setOrder(response.data); // also get the list of all the products\n\n      axios.get('http://localhost:4000/product/getnames/').then(response => {\n        setAllProducts(response.data);\n      }); // also get the vendor review and rating with the customer\n\n      var userid = localStorage.getItem(\"DASS_USERID\");\n      const reviewDetails = {\n        customer: userid,\n        vendor: response.data.vendor\n      };\n      console.log(\"Sending \", reviewDetails);\n      axios.post('http://localhost:4000/rating/view/', reviewDetails).then(response => {\n        console.log(\"Review:\", response.data);\n\n        if (response.data[response.data.length - 1] != undefined) {\n          setReview(response.data[response.data.length - 1].review);\n          setRating(response.data[response.data.length - 1].rating);\n          setAlreadyExists(1);\n        }\n      });\n    });\n  }, []);\n\n  function getPstatus(name) {\n    if (name == \"\") {\n      return \"\";\n    }\n\n    var results = allProducts.filter(function (i) {\n      return i._id == name;\n    });\n\n    if (results[0] == undefined) {\n      return \"\";\n    }\n\n    return results[0].status;\n  }\n\n  function givereview(e) {\n    e.preventDefault();\n    var userid = localStorage.getItem(\"DASS_USERID\");\n    const reviewDetails = {\n      vendor: order.vendor,\n      customer: userid,\n      review: review,\n      rating: rating\n    };\n    console.log(\"sending\", reviewDetails, \"ORDER ID\", orderID);\n\n    if (alreadyExists == 0) {\n      axios.post('http://localhost:4000/rating/add/', reviewDetails).then(res => {\n        document.getElementById(\"comments\").innerHTML = \"Reviewed successfully \";\n        document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\";\n        window.location.replace('/orders');\n      }).catch(function (error) {\n        console.log(error);\n        document.getElementById(\"comments\").innerHTML = \"Error\";\n        document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n      });\n    } else {\n      axios.put('http://localhost:4000/rating/add/', reviewDetails).then(res => {\n        document.getElementById(\"comments\").innerHTML = \"Reviewed successfully \";\n        document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\";\n        window.location.replace('/orders');\n      }).catch(function (error) {\n        console.log(error);\n        document.getElementById(\"comments\").innerHTML = \"Error\";\n        document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n      });\n    }\n  }\n\n  if (getPstatus(order.product) == \"Dispatched\" || getPstatus(order.product) == \"Placed\" || getPstatus(order.product) == \"Cancelled\") {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"REVIEW AND RATE THIS VENDOR\"), React.createElement(\"form\", {\n      onSubmit: e => givereview(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Review: \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: review,\n      onChange: e => setReview(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Rating (0-5): \"), React.createElement(\"input\", {\n      type: \"text\",\n      disabled: \"true\",\n      value: rating,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Rating, {\n      numberOfStars: \"5\",\n      currentRating: rating,\n      onClick: e => setRating(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"REVIEW\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"comments\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })));\n  } else {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    });\n  }\n}\n\nexport default GiveVendorReview;","map":{"version":3,"sources":["/home/karthik_prasanna/Desktop/arathy/frontend/src/components/customer/givevendorreview.js"],"names":["React","useState","useEffect","axios","Rating","GiveVendorReview","review","setReview","rating","setRating","order","setOrder","allProducts","setAllProducts","alreadyExists","setAlreadyExists","orderID","localStorage","getItem","get","then","response","data","userid","reviewDetails","customer","vendor","console","log","post","length","undefined","getPstatus","name","results","filter","i","_id","status","givereview","e","preventDefault","res","document","getElementById","innerHTML","className","window","location","replace","catch","error","put","product","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport Rating from '../rating'\n\nfunction GiveVendorReview() {\n    const [review, setReview] = useState(\"\")\n    const [rating, setRating] = useState(5)\n    const [order, setOrder] = useState(5)\n    const [allProducts, setAllProducts] = useState([])\n    const [alreadyExists,setAlreadyExists]=useState(\"\")\n    let orderID = \"\"\n\n    useEffect(() => {\n        orderID = localStorage.getItem(\"DASS_ORDERID\")\n        axios.get('http://localhost:4000/order/' + orderID)\n            .then(response => {\n                setOrder(response.data)\n                // also get the list of all the products\n                axios.get('http://localhost:4000/product/getnames/')\n                    .then(response => {\n                        setAllProducts(response.data)\n                    })\n                // also get the vendor review and rating with the customer\n                var userid = localStorage.getItem(\"DASS_USERID\")\n                const reviewDetails = {\n                    customer: userid,\n                    vendor: response.data.vendor\n                }\n                console.log(\"Sending \", reviewDetails)\n                axios.post('http://localhost:4000/rating/view/', reviewDetails)\n                    .then(response => {\n                        console.log(\"Review:\", response.data)\n                        if (response.data[response.data.length - 1] != undefined) {\n                            setReview(response.data[response.data.length - 1].review);\n                            setRating(response.data[response.data.length - 1].rating);\n                            setAlreadyExists(1)\n                        }\n                    })\n            })\n    }, []);\n\n    function getPstatus(name) {\n        if (name == \"\") {\n            return \"\"\n        }\n        var results = allProducts.filter(function (i) {\n            return i._id == name\n        })\n        if (results[0] == undefined) {\n            return \"\"\n        }\n        return (results[0].status)\n    }\n\n    function givereview(e) {\n        e.preventDefault();\n        var userid = localStorage.getItem(\"DASS_USERID\")\n        const reviewDetails = {\n            vendor: order.vendor,\n            customer: userid,\n            review: review,\n            rating: rating\n        }\n        console.log(\"sending\", reviewDetails, \"ORDER ID\", orderID)\n        if(alreadyExists==0){\n        axios.post('http://localhost:4000/rating/add/', reviewDetails).then(\n            res => {\n                document.getElementById(\"comments\").innerHTML = \"Reviewed successfully \"\n                document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\"\n                window.location.replace('/orders')\n            })\n            .catch(function (error) {\n                console.log(error);\n                document.getElementById(\"comments\").innerHTML = \"Error\"\n                document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n            });\n        }\n        else{\n            axios.put('http://localhost:4000/rating/add/', reviewDetails).then(\n            res => {\n                document.getElementById(\"comments\").innerHTML = \"Reviewed successfully \"\n                document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\"\n                window.location.replace('/orders')\n            })\n            .catch(function (error) {\n                console.log(error);\n                document.getElementById(\"comments\").innerHTML = \"Error\"\n                document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n            });\n        }\n    }\n\n    if (getPstatus(order.product) == \"Dispatched\" || getPstatus(order.product) == \"Placed\" || getPstatus(order.product) == \"Cancelled\") {\n\n        return (\n            <div>\n                <h1>REVIEW AND RATE THIS VENDOR</h1>\n                <form onSubmit={e => givereview(e)} >\n                    <div className=\"form-group\">\n                        <label>Review: </label>\n                        <input type=\"text\"\n                            className=\"form-control\"\n                            value={review}\n                            onChange={e => setReview(e.target.value)}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Rating (0-5): </label>\n                        <input type=\"text\"\n                            disabled=\"true\"\n                            value={rating}\n                        />\n                        <Rating\n                            numberOfStars=\"5\"\n                            currentRating={rating}\n                            onClick={e => setRating(e)}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <input type=\"submit\" value=\"REVIEW\" className=\"btn btn-primary\" />\n                    </div>\n                    <div id=\"comments\">\n                    </div>\n                </form>\n            </div>\n        )\n    }\n    else {\n        return (\n            <div>\n\n            </div>\n        )\n    }\n}\n\nexport default GiveVendorReview"]},"metadata":{},"sourceType":"module"}
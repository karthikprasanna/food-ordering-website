{"ast":null,"code":"var _jsxFileName = \"/home/karthik_prasanna/Desktop/arathy/frontend/src/components/customer/giveproductreview.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Rating from '../rating';\n\nfunction GiveProductReview() {\n  const [review, setReview] = useState(\"\");\n  const [rating, setRating] = useState(5);\n  const [order, setOrder] = useState(5);\n  const [allProducts, setAllProducts] = useState([]);\n  let orderID = \"\";\n  useEffect(() => {\n    orderID = localStorage.getItem(\"DASS_ORDERID\");\n    axios.get('http://localhost:4000/order/' + orderID).then(response => {\n      setOrder(response.data);\n      setReview(response.data.review);\n      setRating(response.data.rating); // also get the list of all the products\n\n      axios.get('http://localhost:4000/product/getnames/').then(response => {\n        setAllProducts(response.data);\n      });\n    });\n  }, []);\n\n  function getPstatus(name) {\n    if (name == \"\") {\n      return \"\";\n    }\n\n    var results = allProducts.filter(function (i) {\n      return i._id == name;\n    });\n\n    if (results[0] == undefined) {\n      return \"\";\n    }\n\n    return results[0].status;\n  }\n\n  function givereview(e) {\n    e.preventDefault();\n    orderID = localStorage.getItem(\"DASS_ORDERID\");\n    const reviewDetails = {\n      review: review,\n      rating: rating\n    };\n    axios.put('http://localhost:4000/order/review/' + orderID, reviewDetails).then(res => {\n      document.getElementById(\"comments\").innerHTML = \"Reviewed successfully\";\n      document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\";\n    }).catch(function (error) {\n      console.log(error);\n      document.getElementById(\"comments\").innerHTML = \"Error\";\n      document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\";\n    });\n  }\n\n  if (getPstatus(order.product) == \"Dispatched\") {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"REVIEW AND RATE THIS PRODUCT\"), React.createElement(\"form\", {\n      onSubmit: e => givereview(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Review: \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: review,\n      onChange: e => setReview(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Rating (0-5): \"), React.createElement(\"input\", {\n      type: \"text\",\n      disabled: \"true\",\n      value: rating,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(Rating, {\n      numberOfStars: \"5\",\n      currentRating: rating,\n      onClick: e => setRating(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"REVIEW\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"comments\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })));\n  } else {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    });\n  }\n}\n\nexport default GiveProductReview;","map":{"version":3,"sources":["/home/karthik_prasanna/Desktop/arathy/frontend/src/components/customer/giveproductreview.js"],"names":["React","useState","useEffect","axios","Rating","GiveProductReview","review","setReview","rating","setRating","order","setOrder","allProducts","setAllProducts","orderID","localStorage","getItem","get","then","response","data","getPstatus","name","results","filter","i","_id","undefined","status","givereview","e","preventDefault","reviewDetails","put","res","document","getElementById","innerHTML","className","catch","error","console","log","product","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport Rating from '../rating'\n\nfunction GiveProductReview() {\n    const [review, setReview] = useState(\"\")\n    const [rating, setRating] = useState(5)\n    const [order, setOrder] = useState(5)\n    const [allProducts, setAllProducts] = useState([])\n    let orderID = \"\"\n\n    useEffect(() => {\n        orderID = localStorage.getItem(\"DASS_ORDERID\")\n        axios.get('http://localhost:4000/order/' + orderID)\n            .then(response => {\n                setOrder(response.data);\n                setReview(response.data.review)\n                setRating(response.data.rating)               \n                // also get the list of all the products\n                axios.get('http://localhost:4000/product/getnames/')\n                    .then(response => {\n                        setAllProducts(response.data)\n                    })\n            })\n    }, []);\n\n    function getPstatus(name) {\n        if (name == \"\") {\n            return \"\"\n        }\n        var results = allProducts.filter(function (i) {\n            return i._id == name\n        })\n        if (results[0] == undefined) {\n            return \"\"\n        }\n        return (results[0].status)\n    }\n\n    function givereview(e) {\n        e.preventDefault();\n        orderID = localStorage.getItem(\"DASS_ORDERID\")\n        const reviewDetails = {\n            review: review,\n            rating: rating\n        }\n        axios.put('http://localhost:4000/order/review/' + orderID, reviewDetails).then(\n            res => {\n                document.getElementById(\"comments\").innerHTML = \"Reviewed successfully\"\n                document.getElementById(\"comments\").className = \"alert alert-success alert-dismissible fade show\"\n            })\n            .catch(function (error) {\n                console.log(error);\n                document.getElementById(\"comments\").innerHTML = \"Error\"\n                document.getElementById(\"comments\").className = \"alert alert-danger alert-dismissible fade show\"\n            });\n    }\n\n    if (getPstatus(order.product) == \"Dispatched\") {\n        return (\n            <div>\n                <h1>REVIEW AND RATE THIS PRODUCT</h1>\n                <form onSubmit={e => givereview(e)} >\n                    <div className=\"form-group\">\n                        <label>Review: </label>\n                        <input type=\"text\"\n                            className=\"form-control\"\n                            value={review}\n                            onChange={e => setReview(e.target.value)}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Rating (0-5): </label>\n                        <input type=\"text\"\n                            disabled=\"true\"\n                            value={rating}\n                        />\n                        <Rating\n                            numberOfStars=\"5\"\n                            currentRating={rating}\n                            onClick={e => setRating(e)}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <input type=\"submit\" value=\"REVIEW\" className=\"btn btn-primary\" />\n                    </div>\n                    <div id=\"comments\">\n                    </div>\n                </form>\n            </div>\n        )\n    }\n    else {\n        return (\n            <div>\n            </div>\n        )\n    }\n}\n\n export default GiveProductReview"]},"metadata":{},"sourceType":"module"}